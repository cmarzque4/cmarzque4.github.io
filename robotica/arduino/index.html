<h1> Conceptes generals de microcontroladors </h1>
<p> Els diferents microcontroladors tenen en comú els seguents aspectes:</p>
<ul>
  <li>Tipus d'entrades i sortides: el microcontrolador té un processador tipus AVR o Espressif on es conecta entrades digitals, entrades analògiques, sortides digitals i sortides analògiques</li>
  <li>Les entrades i sortides digitals només funcionen amb 0 o 1 es a dir codi binari, zero significa 0 volts i 1 pot significar 5 volts o 3,3 volts depenent del microcontrolador i del pin que utilitzem. A aquestes entrades podem connectar per exemple interruptors, sensor "foscor/claror" </li>  
</ul>
<h2> Sortides analògiques tipus PWM</h2>
<p> PWM significa modulació de l'ample de banda, en anglès <i> Pulse Width Modulation</i> i és una forma d'aconseguir una sortida analògica a partir de diverses sortides digitals, molt ràpides.</p>
<p>PWM es representa amb el símbol "~" tal com podem veure a la imatge següent d'un Arduino Uno</p>
<img src="arduino_uno.png" width="600" height="400">
<p>Més amunt podem veure que els pins números 3, 5, 6, 9, 10 i 11</p>
<p> Aquests PWM són sortides analògiques de 8 bits, en el cas d'Arduino Uno Rev3 d'acord amb el <a href="https://store.arduino.cc/en-es/products/arduino-uno-rev3"> fabricant </a>, mentres en el cas d'Arduino Uno Rev4, és de 12 bits segons el <a href="https://docs.arduino.cc/resources/datasheets/ABX00080-datasheet.pdf"> fabricant </a>, que l'anomena DAC, que vol dir Digital Analog Converter</p>
<p> Tenir 8 o 12 bits en un convertidor digital analògic o DAC (Digital Analog Converter) tipus PWM fa que tinguem 2<sup>8</sup> o 2<sup>10</sup> nivells diferents de corrent, és a dir, 256 nivells diferents o 2048 nivells diferents</p>
<p> Soposem que tant Arduino uno Rev3 com Rev4 poden donar 5 volts com a màxim. Quina seria la resolució en milivolts de cada Arduino?</p>
<p> 5 vols dividit entre 256 dona 0.01953125 volts = 19.53125 milivolts per Arduino Uno Rev3</p>
<p> 5 vols dividit entre 2048 dona 0.00244140625 volts = 2.44140625 milivolts per Arduino Uno Rev4</p>
<p>Els milivolts anterior són la resolució que aconseguim. Imaginem que volem regular la  intensitat d'un LED amb un Arduino Uno Rev3 aconseguim menys fluid i amb graons més grans, es a dir canvis més bruscs perque 256 canvis són menys que 2048 volts. A continuació veurem una imatge que repreenta com combinant moltes senyals digitals ràpidament sembla que generem un senyal analògic, aixo és la base del PWM.</p>
<img src="PMW.PNG" widht="600" height="450">
<p>Quan major és l'amplada del pols vol dir que major és el temps que la sortida digital està en voltatge alt, per exemple 5V i menys temps està a 0V, i per tant el promig  de tots els polsos és més alt. En canvi si per exemple si cada pols és més estret a 5V vol dir que estarà més temps a 0V, i per tant el promig  de tots els polsos és més baix. A la imatge de a dalt es pot veure com s'encendria un LED o un motor funcionaria a una velocitat del 0%, 25%, 50%, 75%, 100%. Quin percentatge del senyal canviara en un cas i en un altre?</p>
  <ul>
    <li>(0,01953125/5)*100 = 0,390625%</li>
    <li>(0,00244140625/5)*100 = 0,048828125%</li>
  </ul>  
<p>A la taula a continuació veuras els valors per defecte de la freqüència PWM en Arduino Uno Rev3</p>
<table>
  <thead>
    <tr>
      <th>PIN de Sortida</th><th>Freqüència PWM (Hz)</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>PINS: 3, 9, 10 i 11</td>
      <td>490 Hz</td>
    </tr>
    <tr>
      <td>PINS: 5 i 6</td>
      <td>976 Hz</td>
    </tr>
  </tbody>
</table>
</body></html>
