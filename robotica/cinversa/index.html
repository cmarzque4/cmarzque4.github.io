<!DOCTYPE html>
<html lang="ca">
<link rel="icon" type="image/png" href="roboticlogo.png">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Web de Carla</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet" />
  <style>
    :root {
      --blue-dark: #023e8a;
      --blue-mid: #0077b6;
      --blue-light: #90e0ef;
      --blue-extra-light: #e0f7fa;
      --white: #ffffff;
      --shadow: rgba(0, 119, 182, 0.15);
    }

    body {
      margin: 0;
      font-family: 'Poppins', sans-serif;
      background: linear-gradient(to bottom, var(--blue-extra-light), var(--white));
      color: var(--blue-dark);
    }

    header {
      background: linear-gradient(to right, var(--blue-dark), var(--blue-mid));
      color: var(--white);
      padding: 1.2rem 2rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
      box-shadow: 0 3px 10px var(--shadow);
    }

    .logo {
      font-size: 1.8rem;
      font-weight: bold;
    }

    .logo a {
  color: white; /* o un altre color amb contrast */
  font-size: 1.8rem;
  font-weight: bold;
  text-decoration: none;
}

  .logo a {
  opacity: 1;
}

    nav a {
      margin-left: 2rem;
      color: var(--white);
      text-decoration: none;
      font-weight: 600;
      transition: color 0.3s ease;
    }

    nav a:hover {
      color: var(--white);
    }

    main {
      max-width: 960px;
      margin: 2.5rem auto;
      padding: 2rem;
      background: var(--white);
      border-radius: 14px;
      box-shadow: 0 8px 20px var(--shadow);
    }

    h1 {
      font-size: 2.5rem;
      text-align: center;
      color: var(--blue-mid);
      margin-bottom: 1.5rem;
    }

    p {
      font-size: 1.1rem;
      line-height: 1.7;
      margin-bottom: 1.5rem;
    }

    a {
      color: var(--blue-mid);
      font-weight: bold;
      text-decoration: none;
    }

    a:hover {
      text-decoration: underline;
    }

    .projectes {
      display: grid;
      gap: 1.2rem;
    }

    .projecte {
      background: var(--blue-light);
      padding: 1rem 1.5rem;
      border-left: 5px solid var(--blue-dark);
      border-radius: 10px;
      box-shadow: 0 4px 10px var(--shadow);
      transition: transform 0.3s ease, background 0.3s ease;
    }

    .projecte:hover {
      transform: translateY(-5px);
      background: #caf0f8;
    }

    .emoji {
      margin-right: 0.5rem;
    }

    @media (max-width: 600px) {
      header {
        flex-direction: column;
        align-items: flex-start;
      }

      nav {
        margin-top: 1rem;
      }

      nav a {
        display: block;
        margin: 0.4rem 0;
      }

      main {
        margin: 1rem;
      }
    }

    .dropdown {
  position: relative;
  display: inline-block;
}

.dropdown-content {
  display: none;
  position: absolute;
  background-color: var(--white);
  min-width: 160px;
  box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.2);
  z-index: 1;
  border-radius: 6px;
  margin-top: 0.5rem;
}

.dropdown-content a {
  color: var(--blue-dark);
  padding: 10px 16px;
  text-decoration: none;
  display: block;
  transition: background 0.2s;
}

.dropdown-content a:hover {
  background-color: var(--blue-light);
}

.dropdown:hover .dropdown-content {
  display: block;
}

.dropdown-content {
  max-height: 0;
  overflow: hidden;
  opacity: 0;
  transition: all 0.4s ease;
  position: absolute;
  background-color: var(--white);
  min-width: 160px;
  box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.2);
  z-index: 1;
  border-radius: 6px;
  margin-top: 0.5rem;
  padding: 0; /* inicialment sense padding */
}

.dropdown-content a {
  color: var(--blue-dark);
  padding: 10px 16px;
  text-decoration: none;
  display: block;
  transition: background 0.2s ease;
}

.dropdown-content a:hover {
  background-color: var(--blue-light);
}

.dropdown:hover .dropdown-content {
  max-height: 500px; /* prou espai per mostrar tot */
  opacity: 1;
  padding: 0.5rem 0;
}

.dropdown-content {
  max-height: 0;
  opacity: 0;
  visibility: hidden;
  overflow: hidden;
  transition: max-height 0.4s ease, opacity 0.4s ease, visibility 0.4s;
  position: absolute;
  background-color: var(--white);
  min-width: 160px;
  box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.2);
  z-index: 1;
  border-radius: 6px;
  margin-top: 0.5rem;
  padding: 0;
}

.dropdown-content a {
  color: var(--blue-dark);
  padding: 10px 16px;
  text-decoration: none;
  display: block;
  transition: background 0.2s ease;
}

.dropdown-content a:hover {
  background-color: var(--blue-light);
}

/* Quan el ratolí passa per sobre, desplega el menú */
.dropdown:hover .dropdown-content {
  max-height: 500px;
  opacity: 1;
  visibility: visible;
  padding: 0.5rem 0;
  transition-delay: 0s;
}

/* Quan surt el cursor, que trigui a desaparèixer */
.dropdown:not(:hover) .dropdown-content {
  transition-delay: 0.2s;
}

.dropdown-content {
  display: none;
  position: absolute;
  background-color: var(--white);
  min-width: 160px;
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
  border-radius: 6px;
  margin-top: 0.5rem;
  z-index: 1;
  padding: 0.5rem 0;
}

.dropdown-content.show {
  display: block;
}

.dropdown-content a {
  color: var(--blue-dark); /* o directament: #023e8a, #111, etc. */
  text-decoration: none;
  font-weight: 600;
}

.dropdown-content a:hover {
  background-color: #ade8f4; /* un blau clar que contrasti */
  color: var(--blue-dark); /* manté la visibilitat en hover */
}

.dropdown-content {
  background-color: white;
  padding: 0; /* <- això és clau */
  margin: 0;
  display: none;
  position: absolute;
  min-width: 160px;
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
  border-radius: 6px;
  z-index: 1;
}

.dropdown-content a {
  padding: 10px 16px;
  margin: 0;
  display: block;
  background-color: white;
}

.dropdown-content * {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

.logo-container {
  display: flex;
  align-items: center;
  gap: 10px; /* espacio entre logo y texto */
}

.logo {
  height: 50px; /* o ajusta al tamaño deseado */
}

.logo-text {
  font-size: 1.5rem;
  color: white;
  font-weight: bold;
}

.navbar {
  display: flex;
  justify-content: space-between;
  align-items: center;
  background-color: #005fa3;
  padding: 10px 20px;
}

.brand {
  display: flex;
  align-items: center;
  gap: 10px; /* espacio entre logo y texto */
}

.logo {
  height: 50px; /* ajusta según tamaño del logo */
}

.brand-text {
  font-size: 1.5rem;
  font-weight: bold;
  color: white;
}

.nav-links {
  display: flex;
  list-style: none;
  gap: 20px;
  margin: 0;
  padding: 0;
}

.nav-links a {
  color: white;
  text-decoration: none;
  font-weight: 500;
}

    
  </style>
</head>

<!-- Navbar -->

<body>

<script>
  let closeTimeout;

  function openDropdown(element) {
    clearTimeout(closeTimeout);
    const menu = element.querySelector('.dropdown-content');
    menu.classList.add('show');
  }

  function closeDropdown(element) {
    const menu = element.querySelector('.dropdown-content');
    closeTimeout = setTimeout(() => {
      menu.classList.remove('show');
    }, 300); // Espera 300ms abans de tancar
  }
</script>

  
  <header>
    
<div class="brand">
  <a href="https://agora.xtec.cat/ies-pompeu-fabra-martorell/" style="display: flex; align-items: center; text-decoration: none;">
    <img src="logo.png" alt="Logo" class="logo">
  </a>
    <a span href="https://cmarzque4.github.io/" class="brand-text"> Web de Carla</span>
  </a>
</div>

    <nav>
      <a href="https://cmarzque4.github.io/">Inici</a>

      
  <div class="dropdown" onmouseenter="openDropdown(this)" onmouseleave="closeDropdown(this)">
  <a href="#"> Braç robòtic ▾</a>
    <div class="dropdown-content">
      <a href="https://cmarzque4.github.io/robotica/cdirecta">Cinemàtica directa</a>
      <a href="https://cmarzque4.github.io/robotica/cinversa">Cinemàtica inversa</a>
      <a href="https://cmarzque4.github.io/robotica/projecte%201">Projecte</a>
      <a href="https://www.tinkercad.com/things/4H1zJ3NW7Ea-magnificent-snaget">Projecte Tinkercard</a>
    </div>
  </div>
      
  <div class="dropdown" onmouseenter="openDropdown(this)" onmouseleave="closeDropdown(this)">
    <a href="#"> Arduino ▾</a>
    <div class="dropdown-content">
      <a href="https://cmarzque4.github.io/robotica/arduino/programacio">Programació</a>
      <a href="https://cmarzque4.github.io/robotica/arduino/configuracio">Configuració</a>
    </div>
  </div>
      <a href="https://cmarzque4.github.io/robotica/arduino/musica">Música</a>
    </nav>
  </header>


<h1>Cinemàtica Inversa d'un robot amb dos braços</h1>
    
    <div>
        <label for="a1">Longitud del primer braç(a1):</label>
        <input type="number" id="a1"  value="2" step="0.1"><br><br>
        
        <label for="a2">Longitud del segon braç(a2):</label>
        <input type="number" id="a2"  value="1.5" step="0.1"><br><br>
        
        <label for="x">Posició X:</label>
        <input type="number" id="x"  value="2.5" step="0.1"><br><br>
        
        <label for="x">Posició Y:</label>
        <input type="number" id="y"  value="1.5" step="0.1"><br><br>

        <button onclick="calculateAngle()">Calcula els angles</button><br><br>
    </div>
    
    <div id="output"></div>
    <canvas id="robotCanvas"width="400" height="400"></canvas>

    <script>
        function calculateAngle(){ 
            
            //Agafar les dades introduïdes per l'usuari
            let a1 = parseFloat(document.getElementById('a1').value);
            let a2 = parseFloat(document.getElementById('a2').value);
            let x = parseFloat(document.getElementById('x').value);
            let y = parseFloat(document.getElementById('y').value);

            //Càlcul de q2
            let d = Math.sqrt(x*x+y*y)
            let q2 = Math.acos((d*d-a1*a1-a2*a2)/(2*a1*a2));

            //Càlcul de q1
            let k1 = a1+a2*Math.cos(q2);
            let k2 = a2*Math.sin(q2);
            let q1 = Math.atan2(y,x)-Math.atan2(k1,k2);

            //Convertir radians a graus
            let q1_deg = q1*180/Math.PI;
            let q2_deg = q2*180/Math.PI;

            //Resultat
            let output = "<div class='equation'>Les equacions per calcular els angles són:</div>";
            output += "<div class='equation'>\\[q_2=\\arccos\\left(\\frac{d^2-a_1^2-a_2^2}{2 a_1 a_2}\\right)\\]</div>";
            output += "<div class='equation'>\\[q_1=\\arctan\\left(y,x\\right)-\\arctan\\left(\\frac{a_2\\sin(q_2)}{a_1+a_2\\cos(q_2)}\\right)\\]</div>";

            //Substituir les variables
            output += `<div class='equation'>Substituint els valors:</div>`;
            output += `<div class='equation'>\\[d=\\sqrt{${x}^2+${y}^2}=${d.toFixed(2)}\\]</div>`;
            output += `<div class='equation'>\\[q_2=\\arccos\\left(\\frac{${d.toFixed(2)}^2-${a1}^2-${a2}^2}{2\\times${a1}\\times${a2}}\\right)=${q2_deg.toFixed(2)}°\\]</div>`;
            output += `<div class='equation'>\\[q_1=\\arctan\\left(${y},${x}\\right)-\\arctan\\left(\\frac{${a2}\\sin(${q2_deg.toFixed(2)}°)}{${a1}+${a2}\\cos(${q2_deg.toFixed(2)}°)}\\right)=${q1_deg.toFixed(2)}°\\]</div>`;

            document.getElementById('output').innerHTML = output;
            MathJax.typeset(); //Renderitzar MathJax per mostrar les fórmules correctament  

            //Visualització gràfica
            let canvas = document.getElementById('robotCanvas');
            let ctx = canvas.getContext('2d')
            ctx.clearRect(0,0,canvas.width,canvas.height); //Netejar canvas

            //Centre i escales
            let centerX = canvas.width/2;
            let centerY = canvas.height/2;
            let scale = 80;

            //Coordenades
            let x1 = a1*Math.cos(q1);
            let y1 = a1*Math.sin(q1);
            let x2 = x1 + a2*Math.cos(q1 + q2);
            let y2 = y1 + a2*Math.sin(q1 + q2);

            //Dibuixar braç 1
            ctx.beginPath();
            ctx.moveTo(centerX,centerY);
            ctx.lineTo(centerX+x1*scale, centerY-y1*scale);
            ctx.strokeStyle='220,30,84';
            ctx.lineWidth=5;
            ctx.stroke();

            //Dibuixar braç 2
            ctx.beginPath();
            ctx.moveTo(centerX+x1*scale, centerY-y1*scale);
            ctx.lineTo(centerX+x2*scale, centerY-y2*scale);
            ctx.strokeStyle='35,57,194';
            ctx.lineWidth=5;
            ctx.stroke();

            //Dibuixar els cercles al extrems
                //Base del braç
                ctx.beginPath();
                ctx.arc(centerX, centerY, 5, 0, 2*Math.PI);
                ctx.fillStyle='red';
                ctx.fill();

                //Final del primer braç
                ctx.beginPath();
                ctx.arc(centerX+x1*scale,centerY-y1*scale, 5, 0, 2*Math.PI);
                ctx.fillStyle='red';
                ctx.fill();

                //Final del segon braç
                ctx.beginPath();
                ctx.arc(centerX+x2*scale,centerY-y2*scale, 5, 0, 2*Math.PI);
                ctx.fillStyle='red';
                ctx.fill();}        
    </script>    
</body>
</html>
