<!DOCTYPE html>
<html lang="ca">
<link rel="icon" type="image/png" href="logo.jpg">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Web de Carla</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet" />
  <style>
    :root {
      --blue-dark: #023e8a;
      --blue-mid: #0077b6;
      --blue-light: #90e0ef;
      --blue-extra-light: #e0f7fa;
      --white: #ffffff;
      --shadow: rgba(0, 119, 182, 0.15);
    }

    body {
      margin: 0;
      font-family: 'Poppins', sans-serif;
      background: linear-gradient(to bottom, var(--blue-extra-light), var(--white));
      color: var(--blue-dark);
    }

    header {
      background: linear-gradient(to right, var(--blue-dark), var(--blue-mid));
      color: var(--white);
      padding: 1.2rem 2rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
      box-shadow: 0 3px 10px var(--shadow);
    }

    .logo {
      font-size: 1.8rem;
      font-weight: bold;
    }

    .logo a {
  color: white; /* o un altre color amb contrast */
  font-size: 1.8rem;
  font-weight: bold;
  text-decoration: none;
}

  .logo a {
  opacity: 1;
}

    nav a {
      margin-left: 2rem;
      color: var(--white);
      text-decoration: none;
      font-weight: 600;
      transition: color 0.3s ease;
    }

    nav a:hover {
      color: var(--white);
    }

    main {
      max-width: 960px;
      margin: 2.5rem auto;
      padding: 2rem;
      background: var(--white);
      border-radius: 14px;
      box-shadow: 0 8px 20px var(--shadow);
    }

    h1 {
      font-size: 2.5rem;
      text-align: center;
      color: var(--blue-mid);
      margin-bottom: 1.5rem;
    }

    p {
      font-size: 1.1rem;
      line-height: 1.7;
      margin-bottom: 1.5rem;
    }

    a {
      color: var(--blue-mid);
      font-weight: bold;
      text-decoration: none;
    }

    a:hover {
      text-decoration: underline;
    }

    .projectes {
      display: grid;
      gap: 1.2rem;
    }

    .projecte {
      background: var(--blue-light);
      padding: 1rem 1.5rem;
      border-left: 5px solid var(--blue-dark);
      border-radius: 10px;
      box-shadow: 0 4px 10px var(--shadow);
      transition: transform 0.3s ease, background 0.3s ease;
    }

    .projecte:hover {
      transform: translateY(-5px);
      background: #caf0f8;
    }

    .emoji {
      margin-right: 0.5rem;
    }

    @media (max-width: 600px) {
      header {
        flex-direction: column;
        align-items: flex-start;
      }

      nav {
        margin-top: 1rem;
      }

      nav a {
        display: block;
        margin: 0.4rem 0;
      }

      main {
        margin: 1rem;
      }
    }

    .dropdown {
  position: relative;
  display: inline-block;
}

.dropdown-content {
  display: none;
  position: absolute;
  background-color: var(--white);
  min-width: 160px;
  box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.2);
  z-index: 1;
  border-radius: 6px;
  margin-top: 0.5rem;
}

.dropdown-content a {
  color: var(--blue-dark);
  padding: 10px 16px;
  text-decoration: none;
  display: block;
  transition: background 0.2s;
}

.dropdown-content a:hover {
  background-color: var(--blue-light);
}

.dropdown:hover .dropdown-content {
  display: block;
}

.dropdown-content {
  max-height: 0;
  overflow: hidden;
  opacity: 0;
  transition: all 0.4s ease;
  position: absolute;
  background-color: var(--white);
  min-width: 160px;
  box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.2);
  z-index: 1;
  border-radius: 6px;
  margin-top: 0.5rem;
  padding: 0; /* inicialment sense padding */
}

.dropdown-content a {
  color: var(--blue-dark);
  padding: 10px 16px;
  text-decoration: none;
  display: block;
  transition: background 0.2s ease;
}

.dropdown-content a:hover {
  background-color: var(--blue-light);
}

.dropdown:hover .dropdown-content {
  max-height: 500px; /* prou espai per mostrar tot */
  opacity: 1;
  padding: 0.5rem 0;
}

.dropdown-content {
  max-height: 0;
  opacity: 0;
  visibility: hidden;
  overflow: hidden;
  transition: max-height 0.4s ease, opacity 0.4s ease, visibility 0.4s;
  position: absolute;
  background-color: var(--white);
  min-width: 160px;
  box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.2);
  z-index: 1;
  border-radius: 6px;
  margin-top: 0.5rem;
  padding: 0;
}

.dropdown-content a {
  color: var(--blue-dark);
  padding: 10px 16px;
  text-decoration: none;
  display: block;
  transition: background 0.2s ease;
}

.dropdown-content a:hover {
  background-color: var(--blue-light);
}

/* Quan el ratolí passa per sobre, desplega el menú */
.dropdown:hover .dropdown-content {
  max-height: 500px;
  opacity: 1;
  visibility: visible;
  padding: 0.5rem 0;
  transition-delay: 0s;
}

/* Quan surt el cursor, que trigui a desaparèixer */
.dropdown:not(:hover) .dropdown-content {
  transition-delay: 0.2s;
}

.dropdown-content {
  display: none;
  position: absolute;
  background-color: var(--white);
  min-width: 160px;
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
  border-radius: 6px;
  margin-top: 0.5rem;
  z-index: 1;
  padding: 0.5rem 0;
}

.dropdown-content.show {
  display: block;
}

.dropdown-content a {
  color: var(--blue-dark); /* o directament: #023e8a, #111, etc. */
  text-decoration: none;
  font-weight: 600;
}

.dropdown-content a:hover {
  background-color: #ade8f4; /* un blau clar que contrasti */
  color: var(--blue-dark); /* manté la visibilitat en hover */
}

.dropdown-content {
  background-color: white;
  padding: 0; /* <- això és clau */
  margin: 0;
  display: none;
  position: absolute;
  min-width: 160px;
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
  border-radius: 6px;
  z-index: 1;
}

.dropdown-content a {
  padding: 10px 16px;
  margin: 0;
  display: block;
  background-color: white;
}

.dropdown-content * {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

.logo-container {
  display: flex;
  align-items: center;
  gap: 10px; /* espacio entre logo y texto */
}

.logo {
  height: 50px; /* o ajusta al tamaño deseado */
}

.logo-text {
  font-size: 1.5rem;
  color: white;
  font-weight: bold;
}

.navbar {
  display: flex;
  justify-content: space-between;
  align-items: center;
  background-color: #005fa3;
  padding: 10px 20px;
}

.brand {
  display: flex;
  align-items: center;
  gap: 10px; /* espacio entre logo y texto */
}

.logo {
  height: 50px; /* ajusta según tamaño del logo */
}

.brand-text {
  font-size: 1.5rem;
  font-weight: bold;
  color: white;
}

.nav-links {
  display: flex;
  list-style: none;
  gap: 20px;
  margin: 0;
  padding: 0;
}

.nav-links a {
  color: white;
  text-decoration: none;
  font-weight: 500;
}

    
  </style>
</head>

<!-- Navbar -->

<body>

<script>
  let closeTimeout;

  function openDropdown(element) {
    clearTimeout(closeTimeout);
    const menu = element.querySelector('.dropdown-content');
    menu.classList.add('show');
  }

  function closeDropdown(element) {
    const menu = element.querySelector('.dropdown-content');
    closeTimeout = setTimeout(() => {
      menu.classList.remove('show');
    }, 300); // Espera 300ms abans de tancar
  }
</script>

  
  <header>
    
<div class="brand">
  <a href="https://agora.xtec.cat/ies-pompeu-fabra-martorell/" style="display: flex; align-items: center; text-decoration: none;">
    <img src="logo.png" alt="Logo" class="logo">
  </a>
    <a span href="https://cmarzque4.github.io/" class="brand-text"> Web de Carla</span>
  </a>
</div>

    <nav>
      <a href="https://cmarzque4.github.io/">Inici</a>

      
  <div class="dropdown" onmouseenter="openDropdown(this)" onmouseleave="closeDropdown(this)">
  <a href="#"> Braç robòtic ▾</a>
    <div class="dropdown-content">
      <a href="https://cmarzque4.github.io/robotica/cdirecta">Cinemàtica directa</a>
      <a href="https://cmarzque4.github.io/robotica/cinversa">Cinemàtica inversa</a>
      <a href="https://cmarzque4.github.io/robotica/projecte%201">Projecte</a>
      <a href="https://www.tinkercad.com/things/4H1zJ3NW7Ea-magnificent-snaget">Projecte Tinkercard</a>
    </div>
  </div>
      
  <div class="dropdown" onmouseenter="openDropdown(this)" onmouseleave="closeDropdown(this)">
    <a href="#"> Arduino ▾</a>
    <div class="dropdown-content">
      <a href="https://cmarzque4.github.io/robotica/arduino/index.html">Teoria Arduino</a>
      <a href="https://cmarzque4.github.io/robotica/arduino/programacio">Programació</a>
      <a href="https://cmarzque4.github.io/robotica/arduino/configuracio">Configuració</a>
    </div>
  </div>
      <a href="https://cmarzque4.github.io/robotica/fractal/">Fractals</a>
      <a href="https://cmarzque4.github.io/robotica/arduino/musica">Música</a>
    </nav>
  </header>


<!-- Contingut principal -->
  <main>
<div class="content-container">
    <h1>Cinemàtica directa d'un robot amb 2 braços</h1>
  <!--h1 vol dir títol gran de l'anglès heading one i es fa més petit amb h2 i fins a h6que és el més petit posible-->
  <!--div és un divisor i conté en aquest cas unes quantes instruccions html que serveixen per introduir totes les dades que-->
  <!--etiquetes i campsd'entrades per a les dades del robot-->
  <label for="a1">Longitud del primer braç (a1):</label>
    <!--label és una etiqueta que ens ajuda a identificar un text-->
    <input type="number" id="a1" value="2" step="0.1"><br><br>
    <!--input vol dir entrada d'informació per part de l'usuari que pot ser de molts tipus
    en aquest cas és un número, però podria ser un input type text, date o button que serian respectivament
    que només accepta que escrivim text una data o un boto respectivament, més exemples aqui: https://www.w3schools.com/html/html_form_input_types.asp-->
    <!--id significa identificador i és com un DNI, no es pot repetir en la mateixa pàgina i ens ajuda a manipular-lo amb
    Javascript getElementById, value significa valor per defecte que sortirà directament, step és la variabilitat
    que jo puc escriure, no puc escriure 4,32, si vulgues escriure 4,32 amb 2 decimal que hauries d'escriure?
    hauria d'escriure step="0.01"-->
    <!-- id ens serveix per identificar qualsevol element en HTML i no es poden repettir en la mateixa pàgina, a vegades
    necessitem fer servir "class" perquè volem repetir les característiques d'aquesta classe diverses vegades a la pàgina.
    Quan escric en HTML "id" i vull agafar-ho des de JavaScrip escric "getElementById" i quan escric en HTML "class" i vull 
    agafar-ho amb JavaScrip escric "getElementByClassName". Si ho vull agafar des de CSS, és a dir, que el que vull fer amb ell és 
    donar-li un estil simplement he de posar en CSS "#nomdelaclasse" seleccionaré aquesta classe i si escric i si escric un 
    . seguid de la id, seleccionaré la id. En CSS s'ha d'escriure sempre "{propietat1:valor1; propietat2:valor2} 
    i davant del primer claudator he d'escriure .nomdelaid o #nomdelaclasse-->
    <!--br significa "break" que deixa una linea en blanc darrera, com hi ha 2 br hi hauran 2 línies en blanc-->
    <label for="a2">Longitud del segon braç (a2):</label>
    <input type="number" id="a2" value="1.5" step="0.1"><br><br>
    <label for="q1">Angle del primer braç (q1, en graus):</label>
    <input type="number" id="q1" value="45" step="0.1"><br><br>
    <label for="q2">Angle del segon braç (q2, en graus):</label>
    <input type="number" id="q2" value="30" step="0.1"><br><br>
    <!--fins aquí els camps d'entrada de dades de l'usuari per fer el problema-->
    <!--tots els inputs són com caixes blanques d'entrada d'informació-->
    <button onclick="calculatePosition()">Calcula la posició </button>
    <!--calcula la posició té forma de botó i quan el cliquem s'executa una funció 
    Javascript anomenada calculatedPosition() que té els parentesis buits perqué no depen de cap parametre
    o argument. Button és un tag principal com label, p per paràgraf, input per entrada i el que té al costat tots
    els tags principals són atributs com en aquest cas onclick-->
    <!--en comptes de fer un clic al botó puc fer ondblclick que obligaria a l'usuari a fer 2 clics o puc fer onmouseover
    el botó s'activa quan paso per sobre amb el ratolí i puc fer que canvii de color o una explicació de lo que fa el botó
    o tooltip o informació del que fa el botó-->
</div><!--aquest és el divisor que conté l'entrada de numeros de l'usuri i el botó calcula la posició-->
    <div id="output"></div>
    <canvas id="robotCanvas" width="400" height="400"></canvas>
    
    <!--l'anterior és un divisor buit que és una part de la pantalla que ara està buida que té un nom, output,
    anomenat així perqué serà on estaran tots els calculs quan apretem el botó calcula la posició-->
    <!--un canvas és una zona on hi haura un gràfic que representarà en el nostre cas els 2 braços del robot,
    en aquest cas quedarà un requadre de 400x400 buit fins que apreti calcula la posició-->
    <script>
        <!--script vol dir que canvio totalment de llenguatge de programació i deixem d'escriure HTML que té els simbols <> i que serveix per fer estuctures estatiques que no es mouen ni són interactives amb llenguatge Javascript-->
     function calculatePosition() {
         //agafar les dades introduides per l'usuari
         let a1 = parseFloat(document.getElementById("a1").value); //longitut primer braç
         let a2 = parseFloat(document.getElementById("a2").value); //longitut segon braç
         let q1_deg = parseFloat(document.getElementById("q1").value); //angle en graus del primer braç
         let q2_deg = parseFloat(document.getElementById("q2").value); //angle en graus del segon braç
         /* let ens permet crear variables locals perquè estan dontre de una funció en aquest cas
         (seria variable global si estiguessin al principi del codi i afectaria a tot el codi) que 
         emmagatzemen els valors introduits per l'usuari perquè a banda de fer "getElementById" aplico
         el mètode ".value" per asegurarme que agafo el valor escric i aplico la funció "parseFloat" per
         convertir el valor introduït per l'usuari en un número decimal o "floating point number" en anlès
         (si haguès parseInt el convertiria en números enters). En aquest troç de cosi de la línia 148 a la 151
         hem aconseguit guardar les 4 dades geomètriques del nostre robot per fer càlculs de la seva posició
         en funció de les 4 dades introduides per l'usuari*/

         //convertir graus en radians per als càlculs trigonomètrics
         let q1 = q1_deg * Math.PI/180;
         let q2 = q2_deg * Math.PI/180; 
        // això és el mateix que dir 2*PI/360

    //Mostrar les fòrmules per calcular la posició del robot
         let output = "<div class='equation'> Les equacions per calcular la posició final del robot son:</div>";
         output += `<div class='equation'>\\[ x = a_1 \\cos(q_1) + a_2 \\cos(q_1 + q_2) \\] </div>`;
         output += `<div class='equation'>\\[ y = a_1 \\sin(q_1) + a_2 \\sin(q_1 + q_2) \\] </div>`;
         /*Estic creant una variable anomenada "output" en JavaScript que conténun element <div> o divisor HTML dintre del
         qual hi han equacions del robot en llenguatge JavaScript de la biblioteca (library) mathJax3 que permet veure 
         fòrmules matemàtiques en una web. MathJax utilitza \\ per avisar que comença un mathJax i té unes normes
         com que la "_" indica subíndex, si poso una \\ davant de sinus o cosinus es veu es veu escrit com a la fòrmula */
    //Substituir les variables en les equacions
         output += "<div class='equation'> Substituir els valors:</div>";
         output += `<div class='equation'>\\[ x = ${a1} \\cdot \\cos(${q1_deg}°) + ${a2} \\cdot \\cos(${q1_deg}° + ${q2_deg}°) \\]</div>`;
         output += `<div class='equation'>\\[ y = ${a1} \\cdot \\sin(${q1_deg}°) + ${a2} \\cdot \\sin(${q1_deg}° + ${q2_deg}°) \\]</div>`;
    //Càlculs numèrics
         let x1 =a1*Math.cos(q1);//Posició en X del primer braç
         let x2 =a2*Math.cos(q1+q2);//Posició en X del segon braç
         let y1 =a1*Math.sin(q1);//Posició en y del primer braç
         let y2 =a2*Math.sin(q1+q2);//Posició en Y del segon braç
         output += "<div class='equation'>Desglossant els càlculs:</div>";
         output += `<div class='equation'>\\[ x_1 = a_1 \\cos(q_1) = ${a1} \\times \\cos(${q1_deg}&deg;) = ${x1.toFixed(2)}\\] </div>`;
         output += `<div class='equation'>\\[ x_2 = a_2 \\cos(q_1+q_2) = ${a2} \\times \\cos(${q1_deg}&deg;) + ${q2_deg}&deg;) = ${x2.toFixed(2)}\\] </div>`;
         output += `<div class='equation'>\\[ y_1 = a_1 \\sin(q_1) = ${a1} \\times \\cos(${q1_deg}&deg;) = ${y1.toFixed(2)}\\] </div>`;
         output += `<div class='equation'>\\[ y_2 = a_2 \\sin(q_1+q_2) = ${a2} \\times \\cos(${q1_deg}&deg;) + (${q2_deg}&deg;) = ${y2.toFixed(2)}\\] </div>`;
    //Càlcul de les coordenades finals (x,y) de la mà del robot
         let x = x1 + x2;
         let y = y1 + y2;
         output += "<div class='equation'> Calculant els resultats numèrics totals: </div>";
         output += `<div class='equation'>\\[ x = ${x.toFixed(2)} \\]</div>`;
         output += `<div class='equation'>\\[ y = ${y.toFixed(2)} \\]</div>`;
         /* .toFixed(2) és un metode d'arrodoniment que apliquem amb la sintaxi del punt a la lletra x i la lletra y
            que corresponen a la posició final del robot. let x = x1 + x2; emmagatzema el valor de la posició x 
            final en x i el $ seleciona el valor x i el posa 2 decimals arrodonots amb .toFixed i els \\[
            indiquen que estem escrivint un codi MathJax3 que es un derivat de Latex per escriure formules matemàtiques 
            que renderitzin bé a la pantalla. output += el que fa es sumar un elemet div anomenat output o sortida
            d'informació que al principi està buit pero quan cliquem calculate comença a sortir tot el output. Ens 
            hem d'adonar que el div output te al seu interior molts divs anomenats equation però no son "id" perquè si fosin
            "id" haurien de ser 1, i son classes*/
    //Mosrtar el resultat
        document.getElementById('output').innerHTML = output;
        MathJax.typeset(); //Renderitzar les fórmules matemàtiques amb MathJax
        }
    //Dibuixar gràficament al robot amb els dos braços
        let canvas = document.getElementById("robotCanvas");
        /*Canvas és semblant a img que servia per introduir una imatge perquè no té els atributs o paràmetres src que 
        indica la font (source=src=nom de la imatge) o la direcció d'internet de la imatge i tampoc té el paràmetre alt,
        que s'hauria de posar en totes les imatges, per exemple, alt="aquest text nomes sortirà si no es troba la imatge
        o per persones cegues perquè entenguin la imatge". En canvi canvas només té dos atributs width i height, que son
        l'altura i l'amplada en píxels. L'element canvas es pot estilitzar amb CSS amb margin, border, background pero 
        aquest CSS no afecta a l'interior del canvas.*/
        /*Agafa un element que s'anomena robotcanvas i ques està situat en el div buit de sota del dev buit de l'output,
        es a dir, hi ha un divisor buit HTML anomenat output on surten totes les fòrmles i un divisor buit anomenat HTML anomenat
        robotCanvas on sortirà el dibuix del robot.*/
        let ctx = canvas.getContext("2d");// el dibuix ha de ser 2D i no 3D
        ctx.clearRect(0,0,canvas.width,canvas.height);
        //Netejem el canvas abans de dibuixar
        //ctx l'hem anomenat així perque significa context de canvas en 2D
        /*Posem el punt davant de .clearRect perquè és un mètode que s'aplica 
          al context (ctx) i té 4 arguments o paràmetres els dos primers son la
          cantonada superior esquerra del rectangles, que sempre es el punt de referència
          de qualsevol dibuix i la cantonada inferior dreta son els 2 darrers números.
          Quins son els dos darrers números? Son 400 perquè son canvas.height i canvas.width.
          clearRect. significa netejar un rectangles i només necessitem dos coordenades per
          netejar-lo, la cantonada superior esquerr i la cantonada inferior dreta.*/
    // Definim el centre del canvas i l'escala
        let centerX = canvas.width / 2; //punt mitjà de X
        let centerY = canvas.height / 2; //punt mitjà de Y
        //Si el canvas fa 400,400 i centerY serien 200,200
        let scale = 80; //Aixó es l'escala per dibuixar les distàncies
        /*La escala del dibuix vol dir que si poso una unitat física en la entrada de text 
        corresponent a a1 o a a2 equival a 80px en el canvas. Per exemple, si el robot té
        un braç de un metre serien 80px.*/
        let x1_screen = centerX + x1*scale;
        let y1_screen = centerY + y1*scale;
        let x2_screen = centerX + x2*scale;
        let y2_screen = centerY + y2*scale;
        /* x1_screen, y1_screen, x2_screen i y2_screen són les coordenades del robot que comencen
        pel centre perquè el braç del robot es pot moure en qualsevol direcció i el que faig és
        aplicar l'escala a les distàncies dels braços introduides*/
        //Aqui lo que farem és dibuixar el primer braç
        ctx.beginPath();
        /*Estic aplicant el mètode beginPath amb la sintaxi del punt amb ctx que és el context ctx
        de 2D i el que fa és iniciar un nou camí de dibuix (path) i es PREPARA per dibuixar un línia.*/
        ctx.moveTo(centerX, centerY);
        //Estic avisant que es mogui al centre del canvas per començar a dibuixar des de el centre del dibuix
        ctx.lineTo(x1_screen, y1_screen);
        /*Això vol dir dibuixa una linia des de el centre del canvas, que és l'inici del primer braç fins a la posició
        x1_screen i y1_screen és el final del braç */
        ctx.strokeStyle = '220,30,84';
        //strokeStyle indica el color de la línia, en aquest cas blau pel primer braç
        ctx.lineWidth='5';
        //lineWidth és l'amplada de la linia en pixels, en aquest cas 5px de gruix
        ctx.stroke();
        /*Dibuixa la línia, sé que és una funció perquè té doble parèntesis i dintre dels parentesis no hi han paràmetres,
        amb aquesta funció conseguim dibuixar la linia en canvas*/
        //A partir d'aqui dibuixem el segon braç i el vull blau amb 5px de gruix
        ctx.beginPath(); //També és una funció
        ctx.moveTo(x1_screen, y1_screen);//Ara posem que conecti al final de l'altre braç perque és línici del primer braç
        ctx.lineTo(x2_screen, y2_screen);/*Ara la línia pot anar a x1_screen, y2_screen (surt d'aquí), així que posem que vagi
        cap a x2_screen, y2_screen que és el final del segon braç*/
        ctx.strokeStyle = '35,57,194';
        ctx.lineWidth='5';
        ctx.stroke();
        
        
    </script>
</div>

<!-- Scripts necessaris -->
<script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/2.11.8/umd/popper.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js"></script>
  </main>
</body>
</html>
