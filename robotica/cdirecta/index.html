<!DOCTYPE html>
<html lang="ca">
<link rel="icon" type="image/png" href="logo.jpg">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Web de Carla</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet" />
  <style>
    :root {
      --blue-dark: #023e8a;
      --blue-mid: #0077b6;
      --blue-light: #90e0ef;
      --blue-extra-light: #e0f7fa;
      --white: #ffffff;
      --shadow: rgba(0, 119, 182, 0.15);
    }

    body {
      margin: 0;
      font-family: 'Poppins', sans-serif;
      background: linear-gradient(to bottom, var(--blue-extra-light), var(--white));
      color: var(--blue-dark);
    }

    header {
      background: linear-gradient(to right, var(--blue-dark), var(--blue-mid));
      color: var(--white);
      padding: 1.2rem 2rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
      box-shadow: 0 3px 10px var(--shadow);
    }

    .logo {
      font-size: 1.8rem;
      font-weight: bold;
    }

    .logo a {
  color: white; /* o un altre color amb contrast */
  font-size: 1.8rem;
  font-weight: bold;
  text-decoration: none;
}

  .logo a {
  opacity: 1;
}

    nav a {
      margin-left: 2rem;
      color: var(--white);
      text-decoration: none;
      font-weight: 600;
      transition: color 0.3s ease;
    }

    nav a:hover {
      color: var(--white);
    }

    main {
      max-width: 960px;
      margin: 2.5rem auto;
      padding: 2rem;
      background: var(--white);
      border-radius: 14px;
      box-shadow: 0 8px 20px var(--shadow);
    }

    h1 {
      font-size: 2.5rem;
      text-align: center;
      color: var(--blue-mid);
      margin-bottom: 1.5rem;
    }

    p {
      font-size: 1.1rem;
      line-height: 1.7;
      margin-bottom: 1.5rem;
    }

    a {
      color: var(--blue-mid);
      font-weight: bold;
      text-decoration: none;
    }

    a:hover {
      text-decoration: underline;
    }

    .projectes {
      display: grid;
      gap: 1.2rem;
    }

    .projecte {
      background: var(--blue-light);
      padding: 1rem 1.5rem;
      border-left: 5px solid var(--blue-dark);
      border-radius: 10px;
      box-shadow: 0 4px 10px var(--shadow);
      transition: transform 0.3s ease, background 0.3s ease;
    }

    .projecte:hover {
      transform: translateY(-5px);
      background: #caf0f8;
    }

    .emoji {
      margin-right: 0.5rem;
    }

    @media (max-width: 600px) {
      header {
        flex-direction: column;
        align-items: flex-start;
      }

      nav {
        margin-top: 1rem;
      }

      nav a {
        display: block;
        margin: 0.4rem 0;
      }

      main {
        margin: 1rem;
      }
    }

    .dropdown {
  position: relative;
  display: inline-block;
}

.dropdown-content {
  display: none;
  position: absolute;
  background-color: var(--white);
  min-width: 160px;
  box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.2);
  z-index: 1;
  border-radius: 6px;
  margin-top: 0.5rem;
}

.dropdown-content a {
  color: var(--blue-dark);
  padding: 10px 16px;
  text-decoration: none;
  display: block;
  transition: background 0.2s;
}

.dropdown-content a:hover {
  background-color: var(--blue-light);
}

.dropdown:hover .dropdown-content {
  display: block;
}

.dropdown-content {
  max-height: 0;
  overflow: hidden;
  opacity: 0;
  transition: all 0.4s ease;
  position: absolute;
  background-color: var(--white);
  min-width: 160px;
  box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.2);
  z-index: 1;
  border-radius: 6px;
  margin-top: 0.5rem;
  padding: 0; /* inicialment sense padding */
}

.dropdown-content a {
  color: var(--blue-dark);
  padding: 10px 16px;
  text-decoration: none;
  display: block;
  transition: background 0.2s ease;
}

.dropdown-content a:hover {
  background-color: var(--blue-light);
}

.dropdown:hover .dropdown-content {
  max-height: 500px; /* prou espai per mostrar tot */
  opacity: 1;
  padding: 0.5rem 0;
}

.dropdown-content {
  max-height: 0;
  opacity: 0;
  visibility: hidden;
  overflow: hidden;
  transition: max-height 0.4s ease, opacity 0.4s ease, visibility 0.4s;
  position: absolute;
  background-color: var(--white);
  min-width: 160px;
  box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.2);
  z-index: 1;
  border-radius: 6px;
  margin-top: 0.5rem;
  padding: 0;
}

.dropdown-content a {
  color: var(--blue-dark);
  padding: 10px 16px;
  text-decoration: none;
  display: block;
  transition: background 0.2s ease;
}

.dropdown-content a:hover {
  background-color: var(--blue-light);
}

/* Quan el ratolí passa per sobre, desplega el menú */
.dropdown:hover .dropdown-content {
  max-height: 500px;
  opacity: 1;
  visibility: visible;
  padding: 0.5rem 0;
  transition-delay: 0s;
}

/* Quan surt el cursor, que trigui a desaparèixer */
.dropdown:not(:hover) .dropdown-content {
  transition-delay: 0.2s;
}

.dropdown-content {
  display: none;
  position: absolute;
  background-color: var(--white);
  min-width: 160px;
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
  border-radius: 6px;
  margin-top: 0.5rem;
  z-index: 1;
  padding: 0.5rem 0;
}

.dropdown-content.show {
  display: block;
}

.dropdown-content a {
  color: var(--blue-dark); /* o directament: #023e8a, #111, etc. */
  text-decoration: none;
  font-weight: 600;
}

.dropdown-content a:hover {
  background-color: #ade8f4; /* un blau clar que contrasti */
  color: var(--blue-dark); /* manté la visibilitat en hover */
}

.dropdown-content {
  background-color: white;
  padding: 0; /* <- això és clau */
  margin: 0;
  display: none;
  position: absolute;
  min-width: 160px;
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
  border-radius: 6px;
  z-index: 1;
}

.dropdown-content a {
  padding: 10px 16px;
  margin: 0;
  display: block;
  background-color: white;
}

.dropdown-content * {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

.logo-container {
  display: flex;
  align-items: center;
  gap: 10px; /* espacio entre logo y texto */
}

.logo {
  height: 50px; /* o ajusta al tamaño deseado */
}

.logo-text {
  font-size: 1.5rem;
  color: white;
  font-weight: bold;
}

.navbar {
  display: flex;
  justify-content: space-between;
  align-items: center;
  background-color: #005fa3;
  padding: 10px 20px;
}

.brand {
  display: flex;
  align-items: center;
  gap: 10px; /* espacio entre logo y texto */
}

.logo {
  height: 50px; /* ajusta según tamaño del logo */
}

.brand-text {
  font-size: 1.5rem;
  font-weight: bold;
  color: white;
}

.nav-links {
  display: flex;
  list-style: none;
  gap: 20px;
  margin: 0;
  padding: 0;
}

.nav-links a {
  color: white;
  text-decoration: none;
  font-weight: 500;
}

        label {
            font-weight: 600;
            color: #333;
            margin-bottom: 8px;
            display: inline-block;
        }

        input[type="number"] {
            padding: 8px 12px;
            border: 2px solid #ffe4b5;
            border-radius: 6px;
            margin-bottom: 15px;
            width: 150px;
            transition: border-color 0.3s ease;
        }

        input[type="number"]:focus {
            border-color: #ff7f50;
            outline: none;
        }

        button {
            background: linear-gradient(45deg, #ff6b6b, #ff3d3d);
            color: white;
            padding: 12px 25px;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.3s ease;
            margin: 20px auto;
            display: block;
        }

        button:hover {
            transform: translateY(-2px);
            background: linear-gradient(45deg, #ff3d3d, #ff6b6b);
        }

        canvas {
            border: 5px solid #ffdd40;
            border-radius: 10px;
            margin: 20px auto;
            display: block;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        #output {
            background-color: #ffe4b5;
            padding: 20px;
            border-radius: 8px;
            margin-top: 20px;
            border-left: 5px solid #ff7f50;
        }

        @keyframes fadeIn {
            0% {
                opacity: 0;
                transform: translateY(20px);
            }
            100% {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @media (max-width: 768px) {
            .content-container {
                padding: 20px;
                margin: 20px;
            }

            h1 {
                font-size: 2rem;
            }

            input[type="number"] {
                width: 100%;
            }
    
  </style>
</head>

<!-- Navbar -->

<body>

<script>
  let closeTimeout;

  function openDropdown(element) {
    clearTimeout(closeTimeout);
    const menu = element.querySelector('.dropdown-content');
    menu.classList.add('show');
  }

  function closeDropdown(element) {
    const menu = element.querySelector('.dropdown-content');
    closeTimeout = setTimeout(() => {
      menu.classList.remove('show');
    }, 300); // Espera 300ms abans de tancar
  }
</script>

  
  <header>
    
<div class="brand">
  <a href="https://agora.xtec.cat/ies-pompeu-fabra-martorell/" style="display: flex; align-items: center; text-decoration: none;">
    <img src="logo.png" alt="Logo" class="logo">
  </a>
    <a span href="https://cmarzque4.github.io/" class="brand-text"> Web de Carla</span>
  </a>
</div>

    <nav>
      <a href="https://cmarzque4.github.io/">Inici</a>

      
  <div class="dropdown" onmouseenter="openDropdown(this)" onmouseleave="closeDropdown(this)">
  <a href="#"> Braç robòtic ▾</a>
    <div class="dropdown-content">
      <a href="https://cmarzque4.github.io/robotica/cdirecta">Cinemàtica directa</a>
      <a href="https://cmarzque4.github.io/robotica/cinversa">Cinemàtica inversa</a>
      <a href="https://cmarzque4.github.io/robotica/projecte%201">Projecte</a>
      <a href="https://www.tinkercad.com/things/4H1zJ3NW7Ea-magnificent-snaget">Projecte Tinkercard</a>
    </div>
  </div>
      
  <div class="dropdown" onmouseenter="openDropdown(this)" onmouseleave="closeDropdown(this)">
    <a href="#"> Arduino ▾</a>
    <div class="dropdown-content">
      <a href="https://cmarzque4.github.io/robotica/arduino/index.html">Teoria Arduino</a>
      <a href="https://cmarzque4.github.io/robotica/arduino/programacio">Programació</a>
      <a href="https://cmarzque4.github.io/robotica/arduino/configuracio">Configuració</a>
    </div>
  </div>
      <a href="https://cmarzque4.github.io/robotica/fractal/">Fractals</a>
      <a href="https://cmarzque4.github.io/robotica/arduino/musica">Música</a>
    </nav>
  </header>

<!-- Contingut principal -->
<main>
<div class="content-container">
           <h1>Cinemàtica directa d'un robot amb dos braços</h1>
        <!-- h1 vol dir títol gran de l'anglés heading one i es fa més petit amb h2, fins a h6 que és el més petit possible-->
        <!-- div és un divisor i conte en aquet cas unes quantes instrucions html que severixen per introduir totes les dades que vulgui l'usari-->
        <!-- etiquetes per a les dades del robot--> 
        <label for="a1">longitud del primer braç (a1):</label>
        <!-- label és una etiqueta que ens ajuda a identficar un text-->
        <input type="number" id="a1" value="2" steps="0.1"><br><br>
        <!-- input vol dir entrada d'informació per part de l'usuari que pot ser de molts típus, en aquest cas és un numero,però podria ser un input type text, date o buttonque serien respectivament que només accepta text, dates o botons respectivament, més exemples aquí: https://www.w3schools.com/ -->
        <!-- id significa identificador i és com un DNI, no es pot repetir en la mateixa pàgina i ens ajuda a manipular Javasript getElementById -->
        <!-- value significa valor per defecte que sortirà directament -->
        <!-- step es la variabilitat que jo puc escriure, no puc escriure 4,32, si vulgues escriure 4,32 amb dos decimals hauria d'escriure step="0.01" -->
        <!-- br significa "break"  que deixa una linia en blanc darrera, si hi han 2 bs hi hauran dos linies en blanc -->
     <label for="a2"> Longitud del segon braç (a2):</label>
    <input type="number" id="a2" value="1.5" step="0.1"> <br><br>
    <label for="q1"> Longitud del primer braç (q1, en graus):</label>
    <input type="number" id="q1" value="45" step="0.1"> <br><br>
    <label for="q2"> Longitud del segon braç (q2, en graus):</label>
    <input type="number" id="q2" value="30" step="0.1"> <br><br>
       <!-- fins aqui els camps d'entrada de dades de l'usuari per fer el problema-->
    <!--tots els inputs són com caixes blanques d'entrada d'informació-->
    <Button onclick="calculatePosition()">Calcula la posició:</button>
    <!--calcula la posició té forma de botó i quan el cliquem s'executa una funció Javascript anomenada calculatedPosition() que té els parentesis buits perqué no depen de cap parametre o argument. Button és un tag principal com label, p per paràgraf, input per entrada i el que té al costat tots els tags principals són atributs com en aquest cas onclick-->
    <!--en comptes de fer un clic al botó puc fer ondobleclick que obligaria a l'usuari a fer 2 clics o puc fer onmouseover, el botó s'activa quan paso per sobre amb el ratolí i puc fer que canvii de color o una explicació de lo que fa el botó o tooltip o informació del que fa el botó-->
</div><!--aquest és el divisor que conté l'entrada de numeros de l'usuri i el botó calcula la posició-->
    <div id="output"></div>
    <!--l'anterior és un divisor buit que és una part de la pantalla que ara està buida que té un nom, output, anomenat així perqué serà on estaran tots els calculs quan apretem el botó calcula la posició-->
    <canvas id="robotCanvas" width="400" height="400"></canvas>
    <!--un canvas és una zona on hi haura un gràfic que representarà en el nostre cas els 2 braços del robot, en aquest cas quedarà un requadre de 400x400 buit fins que apreti calcula la posició-->

      <script lang="javascript">
          let x1, x2, y1, y2;
       function calculatePosition() {
                //agafar les dades introduides per l'usuari
                let a1 = parseFloat(document.getElementById('a1').value); //longitud primer braç 
                let a2 = parseFloat(document.getElementById('a2').value); //longitud segon braç 
                let q1_deg = parseFloat(document.getElementById('q1').value); //angle en graus del primer braç
                let q2_deg = parseFloat(document.getElementById('q2').value); //angle en graus del segon braç
                //La funció "let" ens permet crear variables locals perquè estan a dins d'una funció (en aquest cas seria variable global si estiguessin al principi del codi i afectés a tot el codi) que emmagatzemen els valors introduits per l'usuari perquè a banda de fer getElementById aplico el mètode .value per assegurar-me que agafo el valor escrit i aplico la funció "parseFloat" per convertit el valor introduit per l'usuari en un nombre decimal o "Floating point number" en anglès (si hagués posat "parseInt" el convertiria en nombres enters). En aquest tros de codi anterior de la l11 a la l14 hem aconseguit guardar les 4 dades geomètriques del nostre robot per fer càlculs de la seva posició en funció de les 4 dades introduides per l'usuari */
                //convertir graus a radians per als calculs trigonometrics
                let q1 = q1_deg * Math.PI / 180
                let q2 = q2_deg * Math.PI / 180
                //això es el mateix que 2PI/360
                //mostrar les fórmules per calcular la posició del robot
                let output = "<div class='equation'> Les equacions per calcular la posició final  del robot son:</div>";
                output += "<div class='equation'>\\[ x = a_1 \\cos(q1) + a_2 \\cos(q_1 + q_2) \\] </div>";
                output += "<div class='equation'>\\[ y = a_1 \\sin(q1) + a_2 \\sin(q_1 + q_2) \\] </div>";
                //Substituir les fórmules per calcular la posició del robot
                output += "<div class='equation'> Substituint els valors:</div>";
                output += "<div class='equation'>\\[ x = ${a1} \\cdot \\cos(${q1_deg}&deg;) + ${a2} \\cos(${q1_deg}&deg; + ${q2_deg}&deg;) \\] </div>";
                output += "<div class='equation'>\\[ y = ${a1} \\cdot \\sin(${q1_deg}&deg;) + ${a2} \\sin(${q1_deg}&deg; + ${q2_deg}&deg;) \\] </div>";
                //Càlculs numérics detallats
                x1 = a1 * Math.cos(q1); // Posició en x  del primer braç
                x2 = a2 * Math.cos(q1 + q2); // Posició en x  del segón braç
                y1 = a1 * Math.sin(q1); // Posició en y  del primer braç
                y2 = a2 * Math.sin(q1 + q2); // Posició en y  del segón braç
               output += "<div class='equation'>Desglossant els càlculs:</div>";
                output += "<div class='equation'>\\[x_1 = a_1 \\cos(q_1) + ${a1} \\times \\cos(${q1_deg}&deg;) = ${x1. toFixed(2)}\\]</div>";
                output += "<div class='equation'>\\[x_2 = a_2 \\cos(q_1 + q_2) + ${a2} \\times \\cos(${q1_deg}&deg;) + (${q2_deg}&deg;)= ${x2. toFixed(2)}\\]</div>";
                output += "<div class='equation'>\\[y_1 = a_1 \\sin(q_1) + ${a1} \\times \\sin(${q1_deg}&deg;) = ${y1. toFixed(2)}\\]</div>";
                output += "<div class='equation'>\\[y_2 = a_2 \\sin(q_1 + q_2) + ${a2} \\times \\sin(${q1_deg}&deg;) + (${q2_deg}&deg;)= ${y2. toFixed(2)}\\]</div>";           
               //Càlcul de les coordenades finals (x, y) de la mà del robot
                let x= x1 + x2
                let y= y1 + y2
                output += "<div class='equation'> Calculant els resulats numèrics totals </div>";
                output += "<div class='equation'> \\[ x = ${x.toFixed(2)}\\]</div>";
                output += "<div class='equation'> \\[ y = ${y.toFixed(2)}\\]</div>";
               // .toFixed(2) és un métode d'arrodoniment que apliquem amb la sintaxi del punt a la llentra x i la lletra y que corresponen a l posició final del robot. let x= x1 + x2; emmagatzema el valor de la posició x final en x i el $ selecciona el valor x i el posa dos decimals arrodonits amb .toFixed i els \\[indiquen que estem escrivint un codi MathJax3 que es derivat de Latex per escriuren fòrmules matemàtiques que renderitzen bé a la pantalla. output += el que fa es sumar un element div anomenat output o sortida d'informació que al principi està buit, però quan cliquem calculate comença a sortir tot el output. Ens hem d'adonar que el div output te al seu interior molts divs anomenats equations, però no són "id" perquè si en fossin hauria de ser 1, i són clases*/
               /* Estic creant una variable anomenada "output" en JavaScript que conté un element "div" o divisor HTML dintre del qual hi han equacions del robot en llenguatge JavaScript de la biblioteca (library) MathJax3 que permet veure fórmules matemàtiques en una web. MathJax3 utilitza \\ per avisar que comença un mathJax i té unes normes com que la _ indica "subíndex", si poso una \\ davant de sinus o cosinus es veu escrit com a fórmula */
           //Mostrar el resultat
        document.getElementById('output').innerHTML = output;
        MathJax.typeset();  // Renderitzar MathJax per mostrar les fórmules correctament
        
          
                    </script>
    
<!-- Scripts necessaris -->
<script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/2.11.8/umd/popper.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js"></script>
</div>
</main>
</body>
</html>
