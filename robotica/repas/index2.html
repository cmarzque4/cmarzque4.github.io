<!DOCTYPE html>
<html lang="ca">
<head>
    <style> 
        
        /*Aquest llenguatge es CSS o fulles d'estil, determina els estils (tipus de lletra, colors, marges...) i sempre té la mateixa estructura: nometiquetahtml{propietat1:valor1;propietat2:valor2;} Per exemple :

  canvas{
    border:purple 5px solid;
    margin:5px;
}
 
.content-container {
            margin-left: 10px;
            margin-right: 10px; 
            margin-top: 20px; 
        }
    </style>
</head>
<body>

<!-- Contingut principal -->
<div class="content-container">
           <h3>Càlcul  de la posició d'un robot amb dos braços</h3>
        <label for="a1"> longitud del primer braç (a1):</label> (label= Entrada d'informació fixa)
        <input type="number" id="a1" value="2" steps="0.1"><br><br> (input= entrada d'informació per l'usuari"número, text, data")
        <label for="a2"> Longitud del segon braç (a2):</label> 
        <input type="number" id="a2" value="1.5" step="0.1"> (id= identificador d'elements)
        <label for="q1"> Longitud del primer braç (q1, en graus):</label>
        <input type="number" id="q1" value="45" step="0.1">  (value= valor per defecte)
        <label for="q2"> Longitud del segon braç (q2, en graus):</label>
        <input type="number" id="q2" value="30" step="0.1">  (step= variabilitat que jo puc escriure)

    <Button onclick="calculatePosition()">Calcula la posició:</button>
      <script lang="javascript">
          let x1, x2, y1, y2;
       function calculatePosition() {
                //agafar les dades introduides per l'usuari
                let a1 = parseFloat(document.getElementById('a1').value); //longitud primer braç 
                let a2 = parseFloat(document.getElementById('a2').value); //longitud segon braç 
                let q1_deg = parseFloat(document.getElementById('q1').value); //angle en graus del primer braç
                let q2_deg = parseFloat(document.getElementById('q2').value); //angle en graus del segon braç
                (let= crea variables dins d'una funció)
                let output = "<div class='equation'> Les equacions per calcular la posició final  del robot son:</div>";
                output += "<div class='equation'>\\[ x = a_1 \\cos(q1) + a_2 \\cos(q_1 + q_2) \\] </div>";
                output += "<div class='equation'>\\[ y = a_1 \\sin(q1) + a_2 \\sin(q_1 + q_2) \\] </div>";
               //Càlculs numérics detallats
                x1 = a1 * Math.cos(q1); // Posició en x  del primer braç
                x2 = a2 * Math.cos(q1 + q2); // Posició en x  del segón braç
                y1 = a1 * Math.sin(q1); // Posició en y  del primer braç
                y2 = a2 * Math.sin(q1 + q2); // Posició en y  del segón braç
               output += "<div class='equation'>Desglossant els càlculs:</div>";
                output += "<div class='equation'>\\[x_1 = a_1 \\cos(q_1) + ${a1} \\times \\cos(${q1_deg}&deg;) = ${x1. toFixed(2)}\\]</div>";
                output += "<div class='equation'>\\[x_2 = a_2 \\cos(q_1 + q_2) + ${a2} \\times \\cos(${q1_deg}&deg;) + (${q2_deg}&deg;)= ${x2. toFixed(2)}\\]</div>";
                output += "<div class='equation'>\\[y_1 = a_1 \\sin(q_1) + ${a1} \\times \\sin(${q1_deg}&deg;) = ${y1. toFixed(2)}\\]</div>";
                output += "<div class='equation'>\\[y_2 = a_2 \\sin(q_1 + q_2) + ${a2} \\times \\sin(${q1_deg}&deg;) + (${q2_deg}&deg;)= ${y2. toFixed(2)}\\]</div>";           
               //Càlcul de les coordenades finals (x, y)
                let x= x1 + x2
                let y= y1 + y2
                output += "<div class='equation'> Calculant els resulats numèrics totals </div>";      
          
        // Dibuixar graficament el robot amb els dos braços
        let canvas = document.getElementById('robotCanvas');
        let centerX = canvas.width / 2; // punt mitjà de X
        let centerY = canvas.height / 2; // punt mitjà de Y
        let x1_screen = centerX + x1*scale;
        let y1_screen = centerY + y1*scale;
        let x2_screen = centerX + x2*scale;
        let y2_screen = centerY + y2*scale;

          ctx.beginPath(); (comença a dibuixar)
          ctx.moveTo(centerX, centerY); (mou al centre)
          ctx.lineTo(x1_screen, y1_screen); (línia des del centre del canvas)
          ctx.stroke();
          ctx.beginPath(); //com que té dos parentesis també és una funció
          ctx.moveTo(x1_screen, y1_screen); // (comença al final del primer braç)
          ctx.lineTo(x2_screen, y2_screen); // (recta de x1/y1 a x2/y2)
           }
          
    </script>
</body>
</html>
